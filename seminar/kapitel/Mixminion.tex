\chapter{Typ-III Remailer}
Die als Typ-II klassifizierten Mixmaster-Remailer gelten allgemein in der Praxis als sicher. Trotzdem wurde das Mixminion-Remailer Protokoll entworfen. Mixminion-Remailer stellen den Typ-III der Remailerklassifizierung dar. Die signifikanten Neuerungen, die mit dem Mixminion-Remailer Protokoll eingeführt wurden, waren:
\begin{itemize}
\item das Antworten auf anonyme Nachrichten
\item verschlüsselte Kommunikation zwischen den Remailern (TLS statt SMTP)
\item Einführung einer Verzeichnisserverstruktur
\end{itemize}

Das Möglichkeit auf eine empfangene anonyme Nachricht zu antworten ist der entscheidende Vorteil der Mixminion-Remailer. Kein anderes anonymisierendes Remailer Protokoll (Typ-I und Typ-II) unterstützt dieses Feature nativ.

Die Mixminion-Remailer sind, äquivalent zu den vorherigen Remailer Protokollen, eine Weiterentwicklung des vorherigen Protokolls. So bilden die Mixmaster-Remailer die technische Grundlage für die Entwicklung des Mixminion Protokolls.
- Weiterentwicklung dient nicht primär der Sicherheit (Mixmaster gilt schon als sehr sicher), sondern der generell der Funktionalität


\section{Funktionsweise}
\subsection{SURBs}
Die Single-Use-Reply-Blocks\footnote{kurz: SURBs} wurden eingeführt, um dem Empfänger das Antworten auf eine empfangene anonyme Nachricht zu ermöglichen. Dabei soll die Anonymität des  Senders einer anonymen Nachricht jedoch erhalten bleiben.

Betrachtet man die Lage basierend auf den vorherigen Remailer-Protokollen, kann Bob eigentlich nicht auf eine über ein Remailer-Netzwerk versandte Nachricht von Alice antworten. Das liegt daran, dass ihm lediglich die Identität des letzten Remailers bekannt ist, er die Identität von Alice jedoch nicht kennt.

Um Bob ein Antworten zu ermöglichen, erstellt Alice einen Single-Use-Reply-Block und hängt diese an die Nachricht an. Der SURB befindet sich dabei in verschlüsselter Form im Header der Nachricht. 
Ein SURB enthält zwei wichtige Informationen:
\begin{itemize}
\item die E-Mail Adresse von Alice in verschlüsselter Form
\item einen Pfad durch das Remailer-Netzwerk zu Alice
\end{itemize}

Wichtig ist, dass der SURB selbst für den Empfänger nicht entschlüsselbar ist. Bob ist weiterhin nicht in der Lage die Identität von Alice zu entschlüsseln. Dazu ist lediglich ein Mixminion-Remailer in der Lage. Bob kann jedoch den SURB dazu verwenden um Alice auf ihre anonyme Nachricht zu antworten. Hierfür hängt Bob seine Antwortnachricht an den SURB an und verschickt dieses Konstrukt an den ersten Remailer des im SURB vorhandenen Remailerpfades. Der letzte Remailer dieses Pfades ist nun dazu in der Lage die Adresse von Alice zu entschlüsseln um die Antwort letztendlich an Alice weiterzuleiten.

Bob kann dabei pro empfangenen SURB nur eine Nachricht an Alice schicken. Das liegt daran, dass ein SURB nur einfach verwendbar ist\footnote{daher SINGLE-USE-Reply-Block}. Möchte Bob Alice eine weitere Nachricht schicken, muss er auf eine weitere Nachricht von Alice, die einen SURB enthält, warten, um diesen SURB für eine erneute Antwort zu verwenden.

\subsection{Nachrichten}
\subsubsection{Typisierung}
Bisher existierten in den Remailer-Protkollen nur eine Art von Nachricht -- eine anonyme Nachricht von Alice an Bob. Die Hinzunahme von Antwortnachrichten, die gesondert behandelt werden müssen, ist die Einführung einer Typisierung von Nachrichten für das Mixminion-Remailer Protokoll unerlässlich. Hierbei werden zwischen drei Arten von Nachrichten unterschieden:

\begin{enumerate}
\item normale Nachrichten
\item direkte Antworten über SURBs
\item anonyme Antworten
\end{enumerate}

Eine normale Nachricht entspricht hierbei einer anonymisierten Nachricht von Alice zu Bob, wie sie aus den bisherigen Protokollen bekannt ist. Bei einer direkten Antwort über einen SURB gibt Bob gibt Bob seine Identität preis. Da er nicht weiß, ob er wirklich Alice antwortet, denkbar wäre auch, dass Alice die Adresse eines Dritten in dem SURB angegeben hat, ist es wünschenswert, dass Bob ebenfalls die Möglichkeit hat bei einer Antwort anonym zu bleiben\footnote{das ist nur ein beispielhafter Grund. Logischerweise könnte Bob auch aus anderen Gründen anonym bleiben wollen}. Hierfür existiert die dritte Art einer Nachricht. Hierbei bleibt die Identität von Bob auch dem Empfänger der Antwort verborgen.

\subsubsection{Ununterscheidbarkeit}
Bereits in den vorherigen Kapiteln wurde darauf hingewiesen, dass es für die Gewährleistung der Sicherheit unerlässlich ist, dass der Datenverkehr innerhalb des Remailer-Netzwerks für einen potentiellen Angreifer Eve transparent sein muss. Eve darf nicht dazu in der Lage sein durch die Analyse des Datenverkehrs eine Verbindung zwischen einkommenden und ausgehenden Nachrichtenvekehr herstellen zu können.

Dieser Zustand muss auch nach der Einführung verschiedener Nachrichtentypen erhalten bleiben.  Die Nachrichtentypen müssen daher nach außen hin ununterscheidbar bleiben. Das ist wichtig, damit es Eve nicht möglich ist, über die Unterscheidung der Nachrichtentypen Rückschlüsse bezüglich des Nachrichtenverkehrs zu ziehen. Diese Transparenz wird dadurch gewährleistet, dass alle drei Nachrichtenarten strukturell identisch aufgebaut sind. Sie verfügen über gleichgroße Header- und Bodygrößen\footnote{Body wird häufig auch Payload genannt.}.

\subsubsection{Aufbau}
- hier bietet sich Bild an, um Aufbau aller drei Nachrichtenarten miteinander zu vergleichen (Unterschied liegt im Aufbau des Headers bzw. dem Inhalt des prim. und sek. Headers).

- Größe 32kB
- besteht aus Header und Rest (Rest enthält eigentlichen Inhalt).
- Pfad im Netzwerk wird in zwei Teile aufgeteilt -> also wird auch Header in zwei Teile aufgeteilt (primär erster Teil und sekundär zweiter Teil).
- Pfad darf maximal 32 Remailer beinhalten.
- Für jeden Remailer im Pfad enthält sowohl primärer, als auch Sekundärer Header einen (pro Remailer) Sub-Header, der Prüfsumme für den Rest des Headers enthält (um Integrität des Headers nachzuweisen).
- SubHeader beinhaltet noch: Master Secret für Erstellung von symm. Schlüssel für Verschlüsselung von Nachricht zum Übertragen (TLS) und Adresse des nächsten Remailers

- normale Nachrichten: primärer und sekundärer Header vom Absender befüllt (logisch)
- direkte Antwort: sekundärer Header mit beliebigen Daten gefüllt (?)
- anonyme Antwort: im sekundären Header ist SURB des Antworters (ursprünglicher Empfänger Bob).

\subsection{Verzeichnisserver}
- Verzeichnis auf mehrere Server verteilt
- alle VZ-Server werden ständig synchronisiert, sind also zueinander redundant
- VZ-Server verifizieren sich gegenseitig, um Einführen von manipulierten VZ-Servern zu vermeiden.
-- soll ausfallsicherheit gewährleisten
- informiert Benutzer über Status und Schlüssel der versch. Remailer im Netzwerk
- jeder Remailer im Netzwerk registriert sich anfangs beim Verzeichnisserver
- Remailer aktualisiert VZ-Server laufend über Zustand und Schlüssel

\section{Ablauf}
- Alice besorgt sich vom VZ-Server alle benötigten Informationen (Status und Schlüssel), um Pfad auszuwählen.
- Versenden und Verschlüsseln äquivalent zu Mixmaster.
- Vor Weiterleitung überprüft Remailer Integrität der Nachricht (wie Mixmaster)
- Dann baut Remailer verschlüsselte Verbindung (TLS) zum nächsten Remailer auf.
-- sym. Schlüssel dafür findet er in Header (Master Secret)
- Dann Weiterleitung

- Verhalten beim Übergang zw. ersten Teil und zweiten Teil des Pfades (swap-Operation? genauer Herausfinden...)


\section{Sicherheitsanalyse}
- theoretisch sicherster Remailer
- aber praktisch nicht nachzuweisen
- da nie in den praktischen Einsatz gekommen (blieb im Beta-Stadium, wurde nie fertig entwickelt).


